!function(m,S){"use strict";var M="ht",H=m[M],A="position",y="absolute",j="px",w="left",J="top",D="innerHTML",n="className",Z="width",f="height",O="0",N="display",P="none",B="visibility",$="user-select",G="margin",I="padding",d=null,g=H.Color,F=H.Default,b=F.getInternal(),u=m.setTimeout,_=m.setInterval,s=m.clearTimeout,R=m.clearInterval,C=m.parseInt,c=F.isLeftButton,a=F.isDragging,t=F.startDragging,q=F.getDistance,e=F.isTouchable,z=g.widgetIconHighlight,x=g.widgetIconBorder,K=g.widgetIconGradient,W=function(){return document},i=function(t,q){return t.querySelectorAll(q)},v=function(S){var c=W().createElement(S);return"ul"===S&&(k(c,A,"relative"),k(c,G,O),k(c,I,O),k(c,"list-style",P),k(c,"box-sizing","border-box"),k(c,"-moz-box-sizing","border-box"),k(c,N,"inline-block"),k(c,"vertical-align","text-bottom"),k(c,"border","1px solid "+F.contextMenuBorderColor),k(c,"box-shadow","0 0 16px 1px "+F.contextMenuShadowColor),k(c,"overflow","hidden"),F.contextMenuBorderRadius&&k(c,"border-radius",F.contextMenuBorderRadius+j)),c},E=function(c){var v=c.touches[0];return v?v:c.changedTouches[0]},Y=function(){return v("div")},l=function(){return v("canvas")},k=function(T,B,Y){T.style.setProperty(B,Y,d)},U=function(b,U,n){F.def(H.widget[b],U,n)},T=function(F,A){F.appendChild(A)},V=function(k,N){k.removeChild(N)},o=F.eventListenerOptionsFalse,r=(F.eventListenerOptionsTrue,function(b,l,$,Y){b.addEventListener(l,$,Y?o:o)}),X=function(h,P,J,u){h.removeEventListener(P,J,u?o:o)};b.addMethod(F,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:x},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:z}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:x},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:z,gradient:F.imageGradient,gradientColor:K,background:z}]},contextMenuLabelFont:(e?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var L=function(Q){var M=this,R=Q._view;if(M.$11b=Q,M.addListeners(),r(R,"contextmenu",function(V){V.preventDefault()}),!e){var z=M.$37b=M.$36b.bind(M);r(R,"mouseover",z),r(R,"mouseout",z)}};F.def(L,S,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function($){if(F.preventDefault($),c($)){for(var q=this,v=q.$11b,J=q.getView(),D=J.children,B=0;B<D.length;B++){var f=D[B],Q=f.$24b,U=f.$25b;if(Q&&Q.contains($.target))return v.scrollUp(f),q.$28b=u(function(){q.$29b=_(function(){v.scrollUp(f)},100)},500),t(q,$),void 0;if(U&&U.contains($.target))return v.scrollDown(f),q.$28b=u(function(){q.$29b=_(function(){v.scrollDown(f)},100)},500),t(q,$),void 0}e&&($=E($)),q.$30b={x:$.pageX,y:$.pageY}}},handle_mousedown:function(W){this.handle_touchstart(W)},handle_touchend:function(r){if(c(r)){var T=this,N=T.$30b,F=e?{x:E(r).pageX,y:E(r).pageY}:{x:r.pageX,y:r.pageY};if(!N||q(N,F)>1)return delete T.$30b,void 0;for(var z=T.getView(),A=T.$11b,X=r.target,H=d,L=d,k=A._items,j=z.$26b,t=0;t<j.length;t++)if(L=j[t],L.contains(X)){H=L.getAttribute("data-id");break}if(H&&k){var f=A.$17b(k,function(n){return n._id===H});if(f){var g=!1;f.disabled instanceof Function?g=f.disabled.call(A,f):f.disabled===!0&&(g=!0),g||(f.items?e&&T.$36b(L,!0):A.$1b(f,r))}}delete T.$30b}},$36b:function(G,v){if(!a()){var Y,Z=this,K=Z.$11b,P=Z.getView(),l=K.$20b||P.children[0],c=K.$19b,D=P.$26b,A=P.children,s=G.target,C=P.getBoundingClientRect(),b=F.getWindowInfo(),z=b.width,V=b.height,N=function(Y){for(var b=0;b<A.length;b++){var r=A[b],C=new RegExp(Y+"$"),B=r[n];if(B&&(C.test(B)||B.indexOf(Y+" ")>=0))return r}},q=function(N){for(var L=0;L<D.length;L++){var R=D[L],Q=new RegExp(N+"$"),K=R[n];if(K&&(Q.test(K)||K.indexOf(N+" ")>=0))return R}},f=function(g){var m=q("menu-item"+g.$45b),$=m.getBoundingClientRect(),S=$.top-C.top,T=$.left-C.left;k(g,J,S+j),k(g,w,T+$.width+j);var A=g.getBoundingClientRect(),h=A.top,t=A.left,X=A.height,M=A.width,W=h+X+2,E=t+M+2;W>V&&k(g,J,S+V-W+j),E>z&&k(g,w,T-M+j)};if(v)Y=G;else{if("mouseover"===G.type){for(var d=0;d<D.length;d++){var X=D[d];if(X.contains(s)){Y=X;break}}if(!Y&&c){var W=c.parentNode,x=N("submenu"+c.getAttribute("data-id"));(x&&x.contains(s)||W&&W.contains(s))&&(Y=c)}}else if("mouseout"===G.type){for(var y=!1,O=G.relatedTarget,d=0;d<A.length;d++){var L=A[d];if("hidden"!==L.style.visibility&&L.contains(O)){y=!0;break}}if(y)return}!Y&&l&&(Y=q("menu-item"+(l.$45b||"NaN")))}if(Y!=c){if(c)for(var h=c;h;){if(h[n]=h[n].replace(" menu-item-hover",""),h[n].indexOf("disabled")<0){var m=K.getItemByProperty("_id",h.getAttribute("data-id"));null!=m.background?m.background instanceof Function?k(h,"background-color",m.background.call(K,m)):k(h,"background-color",m.background):k(h,"background-color",F.contextMenuBackground),k(h,"color",F.contextMenuLabelColor)}var t=N("submenu"+h.getAttribute("data-id"));t&&k(t,B,"hidden");var $=h.parentNode;h=q("menu-item"+($.$45b||"NaN"))}if(Y){for(var g=Y,r=[];g;){g[n]+=" menu-item-hover",g[n].indexOf("disabled")<0&&(k(g,"background-color",F.contextMenuHoverBackground),k(g,"color",F.contextMenuHoverLabelColor));var o=N("submenu"+g.getAttribute("data-id"));o&&(k(o,B,"visible"),r.push(o));var $=g.parentNode;g=q("menu-item"+($.$45b||"NaN"))}r.reverse(),r.forEach(function(y){f(y)})}}K.$19b=Y,K.$20b=Y?Y.parentNode:P.children[0]}},handle_mouseup:function(Z){this.handle_touchend(Z)},handleWindowTouchEnd:function(){var k=this;k.$28b!=d&&(s(k.$28b),delete k.$28b),k.$29b!=d&&(R(k.$29b),delete k.$29b),delete k.$34b,delete k.$30b,delete k.$35b},handleWindowMouseUp:function(M){this.handleWindowTouchEnd(M)},handle_mousemove:function(m){this.handle_touchmove(m)},handle_touchmove:function(Z){if(!a()&&c(Z)){for(var W=this,D=W.getView().children,f=d,C=0;C<D.length;C++){var I=D[C];if(I.contains(Z.target)){f=I;break}}var T=W.$30b,g=e?{x:E(Z).pageX,y:E(Z).pageY}:{x:Z.pageX,y:Z.pageY};f&&T&&q(T,g)>2&&(t(W,Z),W.$34b=f,W.$35b=f.$18b)}},handleWindowTouchMove:function(G){G.preventDefault();var g=this,b=g.$11b,i=g.$34b,L=g.$35b,S=g.$30b;if(S&&i){var Y=e?{x:E(G).pageX,y:E(G).pageY}:{x:G.pageX,y:G.pageY},p=Y.y-S.y;p>0?b.scrollUp(i,i.$18b-(L-p)):b.scrollDown(i,L-p-i.$18b)}},handleWindowMouseMove:function(d){this.handleWindowTouchMove(d)},$10b:function(O,K){O.preventDefault();for(var Q=this,C=Q.getView().children,o=d,i=0;i<C.length;i++){var m=C[i];if(m.contains(O.target)){o=m;break}}if(o){var E=this.$11b,L=E.getRowHeight();Math.abs(K)>.05&&(K>0?E.scrollUp(o,K*L):0>K&&E.scrollDown(o,-K*L))}},handle_mousewheel:function(O){this.$10b(O,O.wheelDelta/40)},handle_DOMMouseScroll:function(E){this.$10b(E,-E.detail)},$44b:function(P){this.getView().contains(P.target)||this.$11b.hide()},$41b:function(c){this.$11b.show(c)},$4b:function(M,C){var f=this.$11b;if(C=C||f._items,C&&C.length&&M.keyCode){var A=[M.keyCode];M.shiftKey&&A.push(16),M.ctrlKey&&A.push(17),M.altKey&&A.push(18),/mac/.test(m.navigator?m.navigator.userAgent.toLowerCase():"")?M.metaKey&&A.push(17):M.metaKey&&A.push(91),A.sort();var G=A.join(),a=f.$17b(C,function(h){if(h.key){var i=h.key.slice(0);return i.sort(),G===i.join()}});if(a){a.preventDefault!==!1&&M.preventDefault();var S=!1;a.disabled instanceof Function?S=a.disabled.call(f,a):a.disabled===!0&&(S=!0),S||f.$1b(a,M)}}},$39b:function(G){var e=this,R=E(G);e.$32b={x:R.pageX,y:R.pageY}},$38b:function(z){var M=this,n=E(z);M.$31b={x:n.pageX,y:n.pageY},M.$33b=u(function(){M.$31b&&(M.$32b?q(M.$31b,M.$32b)<10&&M.$11b.show(z):M.$11b.show(z)),delete M.$33b,delete M.$31b,delete M.$32b},600)},$40b:function(){var N=this;N.$33b!=d&&(s(N.$33b),delete N.$33b,delete N.$31b,delete N.$32b)}}),H.widget.ContextMenu=function(N){var D=this,c=D._view=b.createView(null,D);c[n]="ht-widget-contextmenu",D.setItems(N),D.$13b=new L(D),k(c,"font",F.contextMenuLabelFont),k(c,A,y),k(c,"cursor","default"),k(c,"-webkit-"+$,P),k(c,"-moz-"+$,P),k(c,"-ms-"+$,P),k(c,$,P),k(c,"box-sizing","border-box"),k(c,"-moz-box-sizing","border-box"),F.baseZIndex!=d&&k(c,"z-index",C(F.baseZIndex)+2+""),D.$3b=function(k){D.$13b.$4b(k)}},U("ContextMenu",S,{$5b:0,_items:d,$21b:d,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var u=this,B=u._enableGlobalKey;B===!1&&(r(W(),"keydown",u.$3b),u._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,X(W(),"keydown",this.$3b)},setItems:function(u){this._items=u},getItems:function(){return this._items},setVisibleFunc:function(_){this.$16b=_},setLabelMaxWidth:function(V){this.$43b=V},$1b:function(e,v){var u=this;if("check"===e.type)e.selected=!e.selected;else if("radio"===e.type){var M=e.groupId;u.$17b(u._items,function(A){A.groupId===M&&(A.selected=!1)}),e.selected=!0}if(u.hide(),e.action)e.action.apply(e.scope||u,[e,v]);else if(e.href){var y=e.linkTarget||"_self";m.open(e.href,y)}},getItemById:function(r){return this.getItemByProperty("id",r)},setItemVisible:function(I,J){var Z=this.getItemById(I);Z&&(Z.visible=J)},getItemByProperty:function(V,h,$){var L=this;if($=$||L._items,!$||0===$.length)return d;var N=L.$17b($,function(n){return n[V]===h});return N||d},scrollUp:function(O,$){var E=this;if($=$==d?20:$,$=C($),0!==$){var l=0;O.$18b>$&&(l=O.$18b-$),E.$42b(O,l),O.scrollTop=l,O.$18b=l}},scrollDown:function(K,L){var V=this;if(L=L==d?20:L,L=C(L),0!==L){var o=K.$22b,N=K.$23b,$=o-N;N+K.$18b+L<o&&($=K.$18b+L),V.$42b(K,$),K.scrollTop=$,K.$18b=$}},$42b:function(F,s){s=s==d?F.$18b:s;var J=F.$24b,n=F.$25b;J&&(k(J,"top",s+j),0==s?k(J,N,P):k(J,N,"block")),n&&(k(n,"bottom",-s+j),s==F.$22b-F.$23b?k(n,N,P):k(n,N,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(p,j){for(var c=0;c<p.length;c++){var l=p[c];if(j(l))return l;if(l.items){var e=this.$17b(l.items,j);if(e)return e}}},$2b:function(u,t){for(var i=this,$=0;$<u.length;$++){i.$5b++;var M=u[$];if(M.visible!==!1&&!(F.isFunction(M.visible)&&M.visible()===!1||i.$16b&&!i.$16b.call(i,M))){var R=v("li"),L=i.$5b+"";if(k(R,"white-space","nowrap"),k(R,N,"block"),"separator"===M||M.separator===!0){var E=Y();E[n]="separator",k(E,f,F.contextMenuSeparatorWidth+j),k(E,"background",F.contextMenuSeparatorColor),T(R,E)}else{M._id=L,R.setAttribute("data-id",L);var S=v("span"),Q=v("span"),U=l(),r=Y();if(k(S,N,"inline-block"),k(S,f,"1.2em"),k(Q,N,"inline-block"),k(Q,f,"1.2em"),k(Q,"line-height","1.2em"),U[n]="prefix",k(U,N,"inline-block"),k(U,Z,"1em"),k(U,f,"1em"),k(U,"vertical-align","middle"),k(U,G,"0 0.2em"),"check"===M.type&&M.selected?U[n]+=" check-prefix":"radio"===M.type&&M.selected&&(U[n]+=" radio-prefix"),T(R,U),M.icon){var d=l();d[n]="contextmenu-item-icon",k(d,N,"inline-block"),k(d,f,"1.2em"),k(d,Z,"1.2em"),k(d,"margin-right","0.2em"),k(d,"float","left"),d.$50b=M.icon,d._item=M,T(S,d)}if(Q[D]=M.label,T(S,Q),T(R,S),r[n]="suffix",k(r,N,"inline-block"),k(r,"margin-left","1em"),k(r,"margin-right","0.4em"),k(r,"text-align","right"),k(r,"font-size","75%"),M.items&&(r[D]=F.contextMenuSubmenuMark),M.suffix&&(r[D]=M.suffix),T(R,r),R[n]="menu-item menu-item"+L,null!=M.background?M.background instanceof Function?k(R,"background-color",M.background.call(i,M)):k(R,"background-color",M.background):k(R,"background-color",F.contextMenuBackground),k(R,"color",F.contextMenuLabelColor),k(R,I,"3px 0"),M.disabled instanceof Function){var P=M.disabled.call(i,M);P&&(R[n]+=" disabled",k(R,"color",F.contextMenuDisabledLabelColor))}else M.disabled&&(R[n]+=" disabled",k(R,"color",F.contextMenuDisabledLabelColor));if(M.items){i.$21b||(i.$21b=new H.List);var O=v("ul");O[n]="submenu"+L,O.$45b=L,k(O,B,"hidden"),k(O,A,y),T(i._view,O),i.$21b.add(O),i.$2b(M.items,O)}}T(t,R)}}},rebuild:function(){var R=this,I=R._items,p=R._view;if(p&&(p[D]="",R.$21b=d,R.$5b=0,R.$19b=d,R.$20b=d,p.$26b=d,I&&0!==I.length)){var c=v("ul",R._r);T(p,c),R.$2b(I,c)}},addTo:function(Q){if(Q){var k=this,n=k.$13b;if(k.$12b=Q,k.$9b=function(v){n.$44b(v)},k.$27b=function(s){n.$41b(s)},e){var R=k.$6b=function(I){n.$38b(I)},x=k.$7b=function(i){n.$39b(i)},y=k.$8b=function(U){n.$40b(U)};r(Q,"touchstart",R,!0),r(Q,"touchmove",x),r(Q,"touchend",y)}else r(Q,"contextmenu",k.$27b)}},showOnView:function(g,E,A){g=g.getView?g.getView():g;var n=F.getWindowInfo(),X=g.getBoundingClientRect();this.show(X.left+n.left+E,X.top+n.top+A)},show:function($,H,v){var C=this,v=v==d?!0:!1,l=C._view;if(l){if(C.invalidate(),1===arguments.length){var Q=$;if(e){var g=E(Q);$=g.pageX,H=g.pageY}else $=Q.pageX,H=Q.pageY}var c=F.getWindowInfo(),K=c.width,S=c.height,f=c.left,V=c.top,s={pageX:$,pageY:H,clientX:$-f,clientY:H-V,target:1,originEvent:Q},P=s.clientX,G=s.clientY,t=function(_){_.style.height=S-6+j;var f=Y(),R=Y(),J=function(o){k(o,A,y),k(o,"text-align","center"),k(o,Z,"100%"),k(o,"font-size",10+j),k(o,"padding","2px 0"),k(o,"border","0px solid "+F.contextMenuScrollerBorderColor),k(o,"background-color",F.contextMenuScrollerColor1),o.style.backgroundImage="-webkit-linear-gradient(top, "+F.contextMenuScrollerColor1+", "+F.contextMenuScrollerColor2+")",o.style.backgroundImage="linear-gradient(to bottom, "+F.contextMenuScrollerColor1+", "+F.contextMenuScrollerColor2+")"};f[n]="menu-arrow-item menu-arrow-item-top",R[n]="menu-arrow-item menu-arrow-item-bottom",J(f),k(f,"top",O),k(f,"left",O),k(f,"border-bottom-width",1+j),f[D]="▲",J(R),k(R,"bottom",O),k(R,"left",O),k(R,"border-top-width",1+j),R[D]="▼",_.$24b=f,_.$25b=R,_.$18b=_.scrollTop,_.$22b=_.scrollHeight,_.$23b=_.clientHeight,T(_,f),T(_,R),C.$42b(_)};C.beforeShow&&C.beforeShow(s);var o=C._items;if(o&&(Q&&Q.preventDefault(),o.length)){C.rebuild(),F.appendToScreen(l),l.$26b=i(l,".menu-item");var u=l.children[0];u.offsetHeight>S&&t(u);var B=G+(v?1:0),R=P+(v?1:0),m=function(y){for(var p=0,U=0,u=0,f=C.$43b;u<y.children.length;u++){var s=y.children[u];if(s.getAttribute("data-id")){var I=s.children[1],d=s.children[2],h=I.children;if(f){var J=h[0];h.length>1&&(J=h[1]),J.offsetWidth>f&&(J[D]="<marquee scrollamount='3'>"+J[D]+"</marquee>",J.children[0].style.verticalAlign="text-bottom",k(J,Z,f+j),k(J,N,"inline-block"))}var F=I.offsetWidth,H=d.offsetWidth;F>p&&(p=F),H>U&&(U=H)}}for(u=0;u<y.children.length;u++){var s=y.children[u];if(s.getAttribute("data-id")){var I=s.children[1],d=s.children[2],m=I.children[0],$=I.children[1];!$&&m.style.width&&k(m,Z,p+j),k(I,Z,p+j),k(d,Z,U+j)}}};m(u);var h=G+3+l.offsetHeight,I=P+3+l.offsetWidth;h>S?k(l,J,B-(h-S)+V+j):k(l,J,B+V+j),I>K?k(l,w,R-(I-K)+f+j):k(l,w,R+f+j);var b=C.$21b;b&&b.each(function(q){m(q),q.offsetHeight>S&&t(q)}),C.$9b&&r(W(),e?"touchstart":"mousedown",C.$9b,!0),C.afterShow&&C.afterShow(s),C.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=d:!1},getRelatedView:function(){return this.$12b},hide:function(){var h=this,l=h._view;l&&l.parentNode&&(V(l.parentNode,l),X(W(),e?"touchstart":"mousedown",h.$9b,!0),h.afterHide&&h.afterHide())},dispose:function(){var s=this,T=s.$12b,A=s._view;A&&(A.parentNode&&V(A.parentNode,A),s.disableGlobalKey(),T&&(e?(X(T,"touchstart",s.$6b,!0),X(T,"touchmove",s.$7b),X(T,"touchend",s.$8b)):X(T,"contextmenu",s.$27b)),s._view=s._items=s.$21b=s.$19b=s.$12b=s.beforeShow=s.afterShow=s.afterHide=s.$9b=s.$3b=s.$6b=s.$7b=s.$8b=s.$27b=d)},$46b:function(y,U,l,Z,T){var _=b.initContext(y);b.translateAndScale(_,0,0,1),_.clearRect(0,0,l,Z),F.drawStretchImage(_,F.getImage(U),"fill",0,0,l,Z,T,this),_.restore()},$47b:function(){var t,f,m,y=this,D=y._view;if(y.isShowing()){var q=i(D,".check-prefix");for(m=0;m<q.length;m++){var F=q[m];t=F.clientWidth,f=F.clientHeight,F.$48b=t,F.$49b=f,b.setCanvas(F,t,f)}var T=i(D,".radio-prefix");for(m=0;m<T.length;m++){var G=T[m];t=G.clientWidth,f=G.clientHeight,G.$48b=t,G.$49b=f,b.setCanvas(G,t,f)}var C=i(D,".contextmenu-item-icon");for(m=0;m<C.length;m++){var A=C[m];t=A.clientWidth,f=A.clientHeight,A.$48b=t,A.$49b=f,b.setCanvas(A,t,f)}}},validateImpl:function(){var J,t,$,l=this,N=l._view;if(l.isShowing()){var p=i(N,".check-prefix");for($=0;$<p.length;$++){var m=p[$];J=m.$48b,t=m.$49b,J&&t&&l.$46b(m,F.contextMenuCheckIcon,J,t)}var s=i(N,".radio-prefix");for($=0;$<s.length;$++){var Y=s[$];J=Y.$48b,t=Y.$49b,J&&t&&l.$46b(Y,F.contextMenuRadioIcon,J,t)}var _=i(N,".contextmenu-item-icon");for($=0;$<_.length;$++){var r=_[$];J=r.$48b,t=r.$49b,J&&t&&l.$46b(r,F.getImage(r.$50b),J,t,r._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);